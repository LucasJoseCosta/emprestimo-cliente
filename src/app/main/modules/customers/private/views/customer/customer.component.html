<div *ngIf="!isLoading">
    <p-card>
        <ng-template #title>
            <h2>{{ customer && customer.id ? "Editando editar" : "Criar cliente" }}</h2>
        </ng-template>
        <form
            [formGroup]="customerForm"
            (submit)="save()"
        >
            <div>
                <h3>Dados cliente</h3>
                <div class="form-group">
                    <label for="nome">Nome:</label>
                    <input
                        type="text"
                        id="nome"
                        pInputText
                        formControlName="nome"
                    />
                    <div *ngIf="customerForm.get('nome')?.touched && customerForm.get('nome')?.invalid">
                        Nome é obrigatório.
                    </div>
                </div>

                <div class="form-group">
                    <label for="dataNascimento">Data nascimento:</label>
                    <p-datepicker
                        formControlName="dataNascimento"
                        dateFormat="dd/mm/yy"
                        [iconDisplay]="'input'"
                        [showIcon]="true"
                        inputId="icondisplay"
                    />
                    <div
                        *ngIf="
                            customerForm.get('dataNascimento')!.touched && customerForm.get('dataNascimento')?.invalid
                        "
                    >
                        Data nascimento é obrigatório.
                    </div>
                </div>

                <div class="form-group">
                    <label for="cpf">CPF:</label>
                    <p-inputMask
                        type="text"
                        id="cpf"
                        mask="999.999.999-99"
                        formControlName="cpf"
                    />
                    <div *ngIf="customerForm.get('cpf')!.touched && customerForm.get('cpf')?.invalid">
                        CPF é obrigatório.
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input
                        type="email"
                        id="email"
                        pInputText
                        formControlName="email"
                    />
                    <div *ngIf="customerForm.get('email')!.touched && customerForm.get('email')?.invalid">
                        Email é obrigatório.
                    </div>
                </div>

                <div class="form-group">
                    <label for="telefone">Telefone:</label>
                    <p-inputMask
                        type="telefone"
                        id="telefone"
                        mask="(99) 9.9999-9999"
                        formControlName="telefone"
                    />
                    <div *ngIf="customerForm.get('telefone')!.touched && customerForm.get('telefone')?.invalid">
                        Telefone é obrigatório.
                    </div>
                </div>
            </div>

            <div formGroupName="endereco">
                <h3>Endereço</h3>
                <div class="form-group">
                    <label for="logradouro">Rua:</label>
                    <input
                        type="text"
                        id="logradouro"
                        pInputText
                        formControlName="logradouro"
                    />
                    <div *ngIf="customerForm.get('endereco.logradouro')!.touched">Rua é obrigatório.</div>
                </div>

                <div class="form-group">
                    <label for="numero">Número:</label>
                    <input
                        type="text"
                        id="numero"
                        pInputText
                        formControlName="numero"
                    />
                    <div *ngIf="customerForm.get('endereco.numero')!.touched">Número é obrigatório.</div>
                </div>

                <div class="form-group">
                    <label for="bairro">Bairro:</label>
                    <input
                        type="text"
                        id="bairro"
                        pInputText
                        formControlName="bairro"
                    />
                    <div *ngIf="customerForm.get('endereco.bairro')!.touched">Número é obrigatório.</div>
                </div>

                <div class="form-group">
                    <label for="cidade">Cidade:</label>
                    <input
                        type="text"
                        id="cidade"
                        pInputText
                        formControlName="cidade"
                    />
                    <div *ngIf="customerForm.get('endereco.cidade')!.touched">Número é obrigatório.</div>
                </div>

                <div class="form-group">
                    <label for="estado">Estado:</label>
                    <p-select
                        formControlName="estado"
                        [options]="estadosConverted"
                        optionLabel="name"
                        optionValue="name"
                        placeholder="Selecionar estado"
                    />
                    <div *ngIf="customerForm.get('endereco.estado')!.touched">Número é obrigatório.</div>
                </div>
            </div>

            <div formGroupName="infoBancarias">
                <h3>Dados Bancários</h3>
                <div class="form-group">
                    <label for="banco">Banco:</label>
                    <p-select
                        formControlName="banco"
                        [options]="bancosConverted"
                        optionLabel="value"
                        optionValue="name"
                        placeholder="Selecionar banco"
                    />
                    <div *ngIf="customerForm.get('infoBancarias.banco')!.touched">Banco é obrigatório.</div>
                </div>
                <div class="form-group">
                    <label for="agencia">Agência:</label>
                    <input
                        type="text"
                        id="agencia"
                        pInputText
                        formControlName="agencia"
                    />
                    <div *ngIf="customerForm.get('infoBancarias.agencia')!.touched">Agência é obrigatório.</div>
                </div>
                <div class="form-group">
                    <label for="contaBancaria">Conta:</label>
                    <input
                        type="text"
                        id="contaBancaria"
                        pInputText
                        formControlName="contaBancaria"
                    />
                    <div *ngIf="customerForm.get('infoBancarias.contaBancaria')!.touched">Conta é obrigatório.</div>
                </div>
                <div class="form-group">
                    <label for="tipoConta">Tipo de conta:</label>
                    <p-select
                        formControlName="tipoConta"
                        [options]="tipoContasConverted"
                        optionLabel="value"
                        optionValue="name"
                        placeholder="Selecionar tipo conta"
                    />
                    <div *ngIf="customerForm.get('infoBancarias.tipoConta')!.touched">Dígito é obrigatório.</div>
                </div>
            </div>
            <div class="actions-wrapper">
                <button
                    type="button"
                    pButton
                    label="Cancelar"
                    severity="danger"
                    (click)="cancelar()"
                ></button>
                <button
                    type="submit"
                    pButton
                    label="Salvar"
                    [disabled]="customerForm.invalid"
                ></button>
            </div>
        </form>
    </p-card>
</div>
